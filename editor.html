<head>
  <title>DisWebCord Editor</title>
  <script type="text/javascript" src="discord.11.2.1.min.js"></script>
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
  <meta http-equiv="Pragma" content="no-cache" />
  <meta http-equiv="Expires" content="0" />
</head>
<style>
  body {
    background-color: #D8D8D8;
  }
  code {
    background-color: #E8E8E8;
  }
	#editor { 
		top: 0;
		right: 0;
		bottom: 0;
		left: 0;
		width: 600px;
    height: 300px;
	}
	
  h1 {
	  display: inline;
	}
	
</style>
<h1>DisWebCord editor. </h1><i>(using Ace v1.2.9 and Discord.js v11.2.1)<br><br>
<div id="editor">function start(coding){
	//now!
}</div>
<button onclick="Storage.save()">Save</button>
<button onclick="Storage.load()">Load</button>
<button onclick="Storage.reset()">Reset</button><br>
<button onclick="Engine.start()">Start</button>
<button onclick="Engine.stop()">Stop</button><br><br>
<i>
  <b>Tutorial:</b> Write your code, save it and then start it.<br>
  <b>Note:</b> To define your client use <code>var client = new Discord.Client();</code> (your variable doesn't need to be called client)
</i>
<script src="https://rawgit.com/bahmutov/console-log-div/master/console-log-div.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.9/ace.js" charset="utf-8"></script>
<script type="text/javascript">
	var editor = ace.edit("editor");
	editor.setTheme("ace/theme/monokai");
	editor.getSession().setMode("ace/mode/javascript");
	editor.$blockScrolling = Infinity;
  editor.setValue((!localStorage.code ? "" : localStorage.code));
	
  var Storage = {
    save: function(){
      localStorage.code = editor.getValue();
    },
    load: function(){
	    editor.setValue((!localStorage.code ? "" : localStorage.code));
    },
    reset: function(){
      if(confirm('Are you sure you want to reset ALL of your code?')){
        editor.setValue(null);
        localStorage.code = null;
      }
    }
  };
    
  var Engine = {
    start: function(){
      eval(editor.getValue());
    },
    stop: function(){
      window.location.refresh(); // Unload all code to prevent errors & stop the script
    }
  };
</script>
